{% load static %}
{% load variable_tag %}

{% if request.resolver_match.url_name == "main_page" %}
    {% define_variable "nb-hidden" as navbar_visibility_class %}
{% else %}
    {% define_variable "nb-visible" as navbar_visibility_class %}
    {% define_variable "scrolled" as menu_scrolled %}
    {% define_variable "background-change" as background_visibility %}
{% endif %}

{% if request.user_agent.browser.family|is_webp_supported %}
    {% define_variable ".webp" as extension %}
{% else %}
    {% define_variable ".png" as extension %}
{% endif %}

%nav.navbar.navbar-expand.fixed-top.navbar-dark.navbar-animation{:class => "{{ navbar_visibility_class }}"}
    .navbar-collapse{:class => "{{ background_visibility }}"}
        %a.logo{:href=> "{% url 'main_page' %}#home", :class => "{{ menu_scrolled }}"}
            %img.codepoets-logo{:src => "{% static 'common/images/menu/code_poets_logo_menu_white_520x145'|add:extension %}", :alt => "Code Poets"}

        %ul.navbar-nav.ml-auto.menu
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'main_page' %}#services"} Services
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'main_page' %}#project"} Projects
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'team_introduction' %}"} Team
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'how_we_work' %}"} How we work
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'main_page' %}#contact-us"} Contact Us
            %li.nav-item.margin
                %a.nav-link{:href => "{% url 'wagtail_serve' '' %}"} Blog
            %li.estimate-triangle-left.hidden-xs
            %li.nav-link.estimate-anchor
                %a.estimate-link{:href => "{% url 'estimate_project' %}"}
                    %div.nav-item.estimate
                        %span.estimate-project Estimate Project
            %li.estimate-triangle-right.hidden-xs
    %hr.bottom-shadow

.mobile-navbar
    .mobile-logo
        %a{:href => "{% url 'main_page' %}#home"}
            %img.codepoets-mobile{:alt => "Code Poets", :src => "{% static 'common/images/menu/code_poets_logo_menu_white_520x145'|add:extension %}"}

    %button.navbar-toggler.hamburger{:type =>"button", :aria-expanded => "false", :aria-controls => "menu", :aria-label => "Expand menu"}
        %span.hamburger-box
            %span.hamburger-inner
    %hr.bottom-shadow-mobile
    %nav.navbar-mobile-column.navigation
        .menu-mobile
            %ul.navbar-nav.ml-auto.menu
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'main_page' %}#services"} Services
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'main_page' %}#project"} Projects
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'team_introduction' %}"} Team
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'how_we_work' %}"} How we work
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'main_page' %}#contact-us"} Contact Us
                %li.nav-item.margin.mobile-nav
                    %a.nav-link.mobile-link{:href => "{% url 'wagtail_serve' '' %}"} Blog
                %li.nav-link.mobile-link.estimate
                    %a.estimate-link{:href => "{% url 'estimate_project' %}"}
                        %div.nav-item.estimate.mobile-nav
                            %span.mobile.estimate-project Estimate Project
