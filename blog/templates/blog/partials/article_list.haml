{% load thumbnail %}
{% load pipeline %}
{% stylesheet 'blog_posts_list' %}
{% load wagtailimages_tags %}


.row.rest-posts
    {% for blog_article in article_list  %}
        .col-md-6.article-text-container{:class => "{% if forloop.counter|divisibleby:'2' %}grey-background{% endif %}"}
            .row.title
                %a.main-article-url{:href => "{% url 'wagtail_serve' blog_article.specific.slug %}"}
                    .main-article-title {{ blog_article.specific.title }}

            .row.info-section
                .info-section
                    {% thumbnail blog_article.specific.author.front_image "400x400" as image %}
                        %img.main-img.lazyload{:data-src => "{{ image.url }}", :alt => "{{ blog_article.specific.author.name }}", :title => "{{ blog_article.specific.author.name }}"}
                    {% endthumbnail %}
                    .auto-name-and-category
                        .container-section
                            .author-name
                                {{ blog_article.specific.author.name }}
                            .category
                                {% for category in blog_article.get_article_categories %}
                                    %a.category-anchor{:href => "{% url 'wagtail_serve' category.slug %}"} {{ category }}
                                {% endfor %}
                    .read-time
                        {{ blog_article.specific.read_time }} min read
                    .date
                        {{ blog_article.specific.date }}

            .row.article-img-container
                %a.image-url{:href => "{% url 'wagtail_serve' blog_article.specific.slug %}"}
                    {% image blog_article.specific.cover_photo fill-1200x628 %}

            .row.intro-row
                .intro-container
                    {{ blog_article.specific.intro }} [...]
                .read-more
                    %a.read-more-url{:href => "{% url 'wagtail_serve' blog_article.specific.slug %}"}
                        %span.more Read more

        {% if forloop.counter|divisibleby:"2" %}
            .row.separator
                %hr.line
        {% endif %}
    {% endfor %}
